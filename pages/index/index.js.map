{"version":3,"file":"index.js","sources":["../../../../../src/pages/index/index.vue","../../../../../uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { getHomeBannerAPI, getHomeCategoryAPI, getHomeHotAPI } from '@/services/home'\r\nimport CustomNavbar from './components/index.vue'\r\nimport { ref } from 'vue'\r\nimport type { BannerItem, CategoryItem, HotItem } from '@/types/home'\r\nimport { onLoad } from '@dcloudio/uni-app'\r\nimport CategoryPanel from './components/CategoryPanel.vue'\r\nimport HotPanel from './components/HotPanel.vue'\r\nimport XtxGuess from '@/components/XtxGuess.vue'\r\nimport pageSklet from './components/pageSkeleton.vue'\r\nimport { useGuessList } from '@/composables'\r\n\r\nconst bannerList = ref<BannerItem[]>([])\r\nconst getHomeBannerData = async () => {\r\n  const res = await getHomeBannerAPI()\r\n  bannerList.value = res.result\r\n}\r\n//获取前台分类数据\r\nconst categoryList = ref<CategoryItem[]>([])\r\nconst getHomeCategoryData = async () => {\r\n  const res1 = await getHomeCategoryAPI()\r\n  categoryList.value = res1.result\r\n}\r\n//获取热门推荐数据\r\nconst hotList = ref<HotItem[]>([])\r\nconst getHotPanel = async () => {\r\n  const res = await getHomeHotAPI()\r\n  hotList.value = res.result\r\n}\r\n//页面加载\r\nconst isLoading = ref(false)\r\nonLoad(async () => {\r\n  isLoading.value = true\r\n  await Promise.all([getHomeBannerData(), getHomeCategoryData(), getHotPanel()])\r\n  isLoading.value = false\r\n})\r\nconst { guessRef, onScrolltoLower } = useGuessList()\r\nconst isTriggered = ref(false)\r\nconst onRefresher = async () => {\r\n  isTriggered.value = true\r\n  guessRef.value?.resetData()\r\n  await Promise.all([\r\n    getHomeBannerData(),\r\n    getHomeCategoryData(),\r\n    getHotPanel(),\r\n    guessRef.value?.getMore(),\r\n  ])\r\n  isTriggered.value = false\r\n}\r\n</script>\r\n\r\n<template>\r\n  <CustomNavbar></CustomNavbar>\r\n  <scroll-view\r\n    enable-back-to-top\r\n    refresher-enabled\r\n    @refresherrefresh=\"onRefresher\"\r\n    :refresher-triggered=\"isTriggered\"\r\n    @scrolltolower=\"onScrolltoLower\"\r\n    class=\"scroll-view\"\r\n    scroll-y\r\n  >\r\n    <pageSklet v-if=\"isLoading\"></pageSklet>\r\n    <template v-else>\r\n      <XtxSwiper :list=\"bannerList\"></XtxSwiper>\r\n      <CategoryPanel :list=\"categoryList\"></CategoryPanel>\r\n      <HotPanel :list=\"hotList\"></HotPanel>\r\n      <XtxGuess ref=\"guessRef\"></XtxGuess>\r\n    </template>\r\n  </scroll-view>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\npage {\r\n  background-color: pink;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.scroll-view {\r\n  flex: 1;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'G:/gitCode/heima-shop/src/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getHomeBannerAPI","getHomeCategoryAPI","getHomeHotAPI","onLoad","useGuessList"],"mappings":";;;;;;;;;;;;;;;AAEA,MAAA,eAAyB,MAAA;AAIzB,MAAA,gBAA0B,MAAA;AAC1B,MAAA,WAAqB,MAAA;AACrB,MAAA,WAAqB,MAAA;AACrB,MAAA,YAAsB,MAAA;;;;AAGhB,UAAA,aAAaA,kBAAkB,CAAA,CAAE;AACvC,UAAM,oBAAoB,YAAY;AAC9B,YAAA,MAAM,MAAMC,cAAAA;AAClB,iBAAW,QAAQ,IAAI;AAAA,IAAA;AAGnB,UAAA,eAAeD,kBAAoB,CAAA,CAAE;AAC3C,UAAM,sBAAsB,YAAY;AAChC,YAAA,OAAO,MAAME,cAAAA;AACnB,mBAAa,QAAQ,KAAK;AAAA,IAAA;AAGtB,UAAA,UAAUF,kBAAe,CAAA,CAAE;AACjC,UAAM,cAAc,YAAY;AACxB,YAAA,MAAM,MAAMG,cAAAA;AAClB,cAAQ,QAAQ,IAAI;AAAA,IAAA;AAGhB,UAAA,YAAYH,kBAAI,KAAK;AAC3BI,kBAAAA,OAAO,YAAY;AACjB,gBAAU,QAAQ;AACZ,YAAA,QAAQ,IAAI,CAAC,kBAAA,GAAqB,uBAAuB,YAAa,CAAA,CAAC;AAC7E,gBAAU,QAAQ;AAAA,IAAA,CACnB;AACD,UAAM,EAAE,UAAU,gBAAgB,IAAIC,kBAAa,aAAA;AAC7C,UAAA,cAAcL,kBAAI,KAAK;AAC7B,UAAM,cAAc,YAAY;;AAC9B,kBAAY,QAAQ;AACpB,qBAAS,UAAT,mBAAgB;AAChB,YAAM,QAAQ,IAAI;AAAA,QAChB,kBAAkB;AAAA,QAClB,oBAAoB;AAAA,QACpB,YAAY;AAAA,SACZ,cAAS,UAAT,mBAAgB;AAAA,MAAQ,CACzB;AACD,kBAAY,QAAQ;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9CtB,GAAG,WAAW,eAAe;"}